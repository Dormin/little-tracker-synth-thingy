<!DOCTYPE html>
<html>
	<head>
		<title>Test</title>
	</head>
	<body style="padding:16px;background-color:#2d2e39">
		<canvas id="view" width="192" height="144" style="width:384px;height:288px;display:block;margin:auto;image-rendering:pixelated;box-shadow: 0px 0px 32px 0px rgba(0,0,0,0.5)"></canvas>
		<script src="js/audio.js"></script>
		<script src="js/buffer.js"></script>
		<script src="js/canvas.js"></script>
		<script src="js/font.js"></script>
		<script src="js/input.js"></script>
		<script src="js/instruments.js"></script>
		<script src="js/resources.js"></script>
		<script src="js/synth.js"></script>
		<script src="js/tracker.js"></script>
		<script>

			InitAudio()
			InitCanvas("view")
			InitFont()
			InitInput()
			InitInstruments()
			InitSynths(Tracker.NumTracks)
			InitTracker()

			Instruments[0].VcoBalance = 0.5
			Instruments[0].Vco2Pitch = 0.01

			WaitForResources(OnResourcesLoaded)

			function OnResourcesLoaded() {
				StartAudio(OnProcess)
				StartDrawing(OnDraw)
				StartInput(OnInput)
			}

			function OnProcess(OutputL, OutputR, NumSamples) {
				ProcessTracker(OutputL, OutputR, NumSamples)
			}

			function OnDraw() {
				DrawTracker()
			}

			function OnInput(Event, Key) {
				HandleTrackerInput(Event, Key)
			}

		</script>
	</body>
</html>